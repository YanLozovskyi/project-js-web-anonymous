function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequirecf35;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){r[e]=n},n.parcelRequirecf35=a);var o=a("2xHB1"),s=a("78eZQ");const i={myLibrarySection:document.getElementById("my-library"),libraryContent:document.querySelector(".js-my-library-content"),genreList:document.querySelector(".js-my-library-genre-list"),moviesList:document.querySelector(".js-my-library-movies-list"),loadMoreButton:document.querySelector(".js-my-library-load-more-button")};var l=a("1nG8V");var c=a("gjiCh"),y=a("lewhg");const d=new(0,c.Loader);let m,u="All",b=0,p=0,g=0,f=[];const v=o.default.load(s.STORAGE_KEY.myLibraryMoviesList);function L(e){if(b=0,u=Number(e.currentTarget.value),!u)return u="All",void h(v);f=v.filter((e=>e.genres.some((e=>e.id===u)))),h(f)}async function h(e){d.onShow(),p=0,g=6,i.moviesList.innerHTML="",i.loadMoreButton.style.display="none",e.length>6?(i.loadMoreButton.style.display="block",i.loadMoreButton.addEventListener("click",M),x(p,g,e)):i.moviesList.innerHTML=await(0,l.createMarkupFilmsCards)(e),d.onClose()}function M(){d.onShow(),i.loadMoreButton.blur(),p+=6,g+=6,x(p,g,"All"===u?v:f),d.onClose()}async function x(e,n,t){if(b+=1,m=t.length/6,m>b){const r=t.slice(e,n);i.moviesList.insertAdjacentHTML("beforeend",await(0,l.createMarkupFilmsCards)(r))}else{const r=t.slice(e,n);i.moviesList.insertAdjacentHTML("beforeend",await(0,l.createMarkupFilmsCards)(r)),i.loadMoreButton.style.display="none"}}0===v?.length?(i.genreList.removeEventListener("change",L),i.myLibrarySection.classList.add("my-library-content-text-message-section"),i.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '):v?(v.reduce(((e,n)=>[...e,...n.genres]),[]).filter(((e,n,t)=>n===t.findIndex((n=>n.id===e.id&&n.name===e.name)))).forEach((e=>i.genreList.insertAdjacentHTML("beforeend",function({id:e,name:n}){return` <option value="${e}">${n}</option>`}(e)))),new(e(y))({select:"#my-library-genre-list",settings:{searchText:"No genre"}}),i.genreList.addEventListener("change",L),h(v)):(i.genreList.removeEventListener("change",L),i.myLibrarySection.classList.add("my-library-content-text-message-section"),i.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '),document.addEventListener("click",(function(e){if("add-remove-to-my-library"===e.target.dataset.action){const e=o.default.load(s.STORAGE_KEY.myLibraryMoviesList);0===e.length&&(i.genreList.removeEventListener("change",L),i.myLibrarySection.classList.add("my-library-content-text-message-section"),i.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '),h(e)}})),a("8FnLx"),a("6Ju3h"),a("6HA5D"),a("iuRNH"),a("jnjzE"),a("i04RF");
//# sourceMappingURL=my-library.3a92c33f.js.map
