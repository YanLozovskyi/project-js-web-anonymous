!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequirecf35;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){r[e]=n},n.parcelRequirecf35=a);var o=a("bpxeT"),s=a("8nrFW"),i=a("2TvXO"),c=a("5C21v"),l=a("cY1yb"),u={myLibrarySection:document.getElementById("my-library"),libraryContent:document.querySelector(".js-my-library-content"),genreList:document.querySelector(".js-my-library-genre-list"),moviesList:document.querySelector(".js-my-library-movies-list"),loadMoreButton:document.querySelector(".js-my-library-load-more-button")},y=a("bxNz7");var d=a("kvC6y");var m,p,b=a("9RsV7"),f=new(0,d.Loader),v="All",g=0,L=0,h=0,x=[],S=c.default.load(l.STORAGE_KEY.myLibraryMoviesList);function M(e){if(g=0,!(v=Number(e.currentTarget.value)))return v="All",void w(S);w(x=S.filter((function(e){return e.genres.some((function(e){return e.id===v}))})))}function w(e){return T.apply(this,arguments)}function T(){return(T=e(o)(e(i).mark((function n(t){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.onShow(),L=0,h=6,u.moviesList.innerHTML="",u.loadMoreButton.style.display="none",!(t.length>6)){e.next=9;break}u.loadMoreButton.style.display="block",u.loadMoreButton.addEventListener("click",E),k(L,h,t),e.next=12;break;case 9:return e.next=11,(0,y.createMarkupFilmsCards)(t);case 11:u.moviesList.innerHTML=e.sent;case 12:f.onClose();case 13:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function E(){f.onShow(),u.loadMoreButton.blur(),k(L+=6,h+=6,"All"===v?S:x),f.onClose()}function k(e,n,t){return O.apply(this,arguments)}function O(){return(O=e(o)(e(i).mark((function n(t,r,a){var o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g+=1,!(a.length/6>g)){e.next=11;break}return o=a.slice(t,r),e.t0=u.moviesList,e.next=7,(0,y.createMarkupFilmsCards)(o);case 7:e.t1=e.sent,e.t0.insertAdjacentHTML.call(e.t0,"beforeend",e.t1),e.next=18;break;case 11:return s=a.slice(t,r),e.t2=u.moviesList,e.next=15,(0,y.createMarkupFilmsCards)(s);case 15:e.t3=e.sent,e.t2.insertAdjacentHTML.call(e.t2,"beforeend",e.t3),u.loadMoreButton.style.display="none";case 18:case"end":return e.stop()}}),n)})))).apply(this,arguments)}0===(null==S?void 0:S.length)?(u.genreList.removeEventListener("change",M),u.myLibrarySection.classList.add("my-library-content-text-message-section"),u.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '):S?(m=document.querySelector(".js-guard"),p=document.querySelector(".scroll-up--button"),new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting?p.classList.add("scroll-up--button---shown"):p.classList.remove("scroll-up--button---shown")}))}),{root:null,rootMargin:"-100px",threshold:0}).observe(m),S.reduce((function(n,t){return e(s)(n).concat(e(s)(t.genres))}),[]).filter((function(e,n,t){return n===t.findIndex((function(n){return n.id===e.id&&n.name===e.name}))})).forEach((function(e){return u.genreList.insertAdjacentHTML("beforeend",(t=(n=e).id,r=n.name,' <option value="'.concat(t,'">').concat(r,"</option>")));var n,t,r})),new(e(b))({select:"#my-library-genre-list",settings:{searchText:"No genre"}}),u.genreList.addEventListener("change",M),w(S)):(u.genreList.removeEventListener("change",M),u.myLibrarySection.classList.add("my-library-content-text-message-section"),u.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '),document.addEventListener("click",(function(e){if("add-remove-to-my-library"===e.target.dataset.action){var n=c.default.load(l.STORAGE_KEY.myLibraryMoviesList);0===n.length&&(u.genreList.removeEventListener("change",M),u.myLibrarySection.classList.add("my-library-content-text-message-section"),u.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '),w(n)}})),a("cs7FV"),a("2jzSA"),a("4F07H"),a("8e9SS"),a("hkeON")}();
//# sourceMappingURL=my-library.0b810e8a.js.map
