function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},o=n.parcelRequirecf35;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){r[e]=n},n.parcelRequirecf35=o);var a=o("2xHB1"),s=o("78eZQ");const i={myLibrarySection:document.getElementById("my-library"),libraryContent:document.querySelector(".js-my-library-content"),genreList:document.querySelector(".js-my-library-genre-list"),moviesList:document.querySelector(".js-my-library-movies-list"),loadMoreButton:document.querySelector(".js-my-library-load-more-button")};var l=o("1nG8V");var c=o("gjiCh");var y=o("lewhg");const d=new(0,c.Loader);let u,m="All",b=0,p=0,g=0,v=[];const f=a.default.load(s.STORAGE_KEY.myLibraryMoviesList);function L(e){if(b=0,m=Number(e.currentTarget.value),!m)return m="All",void h(f);v=f.filter((e=>e.genres.some((e=>e.id===m)))),h(v)}async function h(e){d.onShow(),p=0,g=6,i.moviesList.innerHTML="",i.loadMoreButton.style.display="none",e.length>6?(i.loadMoreButton.style.display="block",i.loadMoreButton.addEventListener("click",M),S(p,g,e)):i.moviesList.innerHTML=await(0,l.createMarkupFilmsCards)(e),d.onClose()}function M(){d.onShow(),i.loadMoreButton.blur(),p+=6,g+=6,S(p,g,"All"===m?f:v),d.onClose()}async function S(e,n,t){if(b+=1,u=t.length/6,u>b){const r=t.slice(e,n);i.moviesList.insertAdjacentHTML("beforeend",await(0,l.createMarkupFilmsCards)(r))}else{const r=t.slice(e,n);i.moviesList.insertAdjacentHTML("beforeend",await(0,l.createMarkupFilmsCards)(r)),i.loadMoreButton.style.display="none"}}0===f?.length?(i.genreList.removeEventListener("change",L),i.myLibrarySection.classList.add("my-library-content-text-message-section"),i.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '):f?(function(){const e=document.querySelector(".js-guard"),n=document.querySelector(".scroll-up--button");new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting?n.classList.add("scroll-up--button---shown"):n.classList.remove("scroll-up--button---shown")}))}),{root:null,rootMargin:"-100px",threshold:0}).observe(e)}(),f.reduce(((e,n)=>[...e,...n.genres]),[]).filter(((e,n,t)=>n===t.findIndex((n=>n.id===e.id&&n.name===e.name)))).forEach((e=>i.genreList.insertAdjacentHTML("beforeend",function({id:e,name:n}){return` <option value="${e}">${n}</option>`}(e)))),new(e(y))({select:"#my-library-genre-list",settings:{searchText:"No genre"}}),i.genreList.addEventListener("change",L),h(f)):(i.genreList.removeEventListener("change",L),i.myLibrarySection.classList.add("my-library-content-text-message-section"),i.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '),document.addEventListener("click",(function(e){if("add-remove-to-my-library"===e.target.dataset.action){const e=a.default.load(s.STORAGE_KEY.myLibraryMoviesList);0===e.length&&(i.genreList.removeEventListener("change",L),i.myLibrarySection.classList.add("my-library-content-text-message-section"),i.libraryContent.innerHTML=' \n    <p class="my-library-content-text-message">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>You don’t have any movies at your library.</span>\n    </p>\n    <a class="button-accent my-library-content-text-message-button" href="./catalog.html">Search movie</a>\n    '),h(e)}})),o("8FnLx"),o("6Ju3h"),o("6HA5D"),o("iuRNH"),o("i04RF");
//# sourceMappingURL=my-library.9462ee0a.js.map
